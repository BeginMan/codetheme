// init
$(function ($) {
    choiceCode();
    choiceDate();
})

//　添加分类
function addCode(elem) {
    var content = '	<div class="un_open">\
		<p><span class="fs14">分类名：</span> <input type="text" id="code" class="input" /></p>\
	</div>';
    $.dialog({
        title: '添加分类',
        lock: true,
        skin: 'white',
        content: content,
        ok:function(){
            var code = $('#code').val();
            if (code) {
                var url = "/manage/addcode/";
                $.post(url, {'code': code}, function(data) {
                    var r = data.evalJson();
                    if (r.response == 'ok') {
                        $(elem).before('<button type="button" class="btn btn-default" style="margin-right: 10px;display: block" id="c_'+ r.data+'">'+code+'</button>')
                        $('#c_'+ r.data).bind('click',choiceCode())
                    } else {
                        $.dialog({title: '提示', lock: true, skin: 'white', content: '保存失败，请联系管理员' });
                    }
                })
            } else {
                $.dialog({title: '提示',lock: true, skin: 'white', content: '请填写分类名称'});
            }
        },
        cancel: true
    });
}

// 选择分类效果
function choiceCode(){
    $('#codes button').click(function(){
        $('#codes button').attr('class','btn btn-default');
        $(this).addClass('btn btn-success');
    })
}

//日期范围选择
function choiceDate(){
    $('#begin_date').calendar({ maxDate:'#end_date' });
    $('#end_date').calendar({ minDate:'#begin_date' });

}